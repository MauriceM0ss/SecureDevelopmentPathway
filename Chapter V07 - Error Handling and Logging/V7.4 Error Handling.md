# V7.4 Error Handling

## 7.4.1 Verify that a generic message is shown when an unexpected or security sensitive error occurs, potentially with a unique ID which support personnel can use to investigate

Webapplicaties kun je configureren om generieke errors te geven wanneer er iets fout gaat. Wanneer je dit niet doet, krijg je veelal debug informatie te zien dat potentieel gevoelige informatie bevat. Dit helpt kwaadwillenden om meer informatie te vergaren over de software stack die gebruikt wordt met bijbehorende versienummers, dus ook bekende kwetsbaarheden. Daarnaast kan dit ook informatie geven over verborgen paden, (sessie) tokens, backend systemen zoals databases, aanvullende logging informatie, etc.

Dit kunnen we eenvoudig voorkomen door een generieke "oeps" pagina weer te geven bij foutcodes (4xx, 5xx).

### Hoe te testen?

#### Optie 1 (manueel)

> [!TIP]
> Doe dit wel op een productie omgeving of run de non-productie applicatie in productie-modus anders krijg je alsnog debug informatie terwijl alles wel goed is geconfigureerd.

1. 404 error:
    * Probeer een pad te openen die niet bestaat zoals <https://example.com/ditpadbestaatniet>"
        * e.g. via Postman, je browser, Curl, Burp Suite of ZAP
    * Vervolgens kijk je of je de generieke pagina ziet die je hebt geconfigureerd

### Hoe te implementeren?

* In de praktijk zien we vaak een combinatie van zowel de generieke error pagina's gecreÃ«erd door de framework en additionele error handling in de code.
* Heb je een response code van 4xx of 5xx, genereer dan een response pagina met generieke tekst. Dit is uiteraard programmeertaal afhankelijk hoe je dit kunt implementeren (error handling).
* Zorg bij custom error handling dat je geen "200 OK" maar daadwerkelijk de juiste code teruggeeft.
* Bij een aantal frameworks vind je default error pagina's die automatisch worden weergegeven wanneer zich een 4xx of 5xx voordoet. Deze pagina's je kunt stylen naar wens.
* Frameworks hebben veelal ingebouwde functionaliteit voor error reponses. Maak je hier gebruik van, zoek dan op hoe je dit moet configureren.
* Hieronder links naar veelgebruikte libraries en frameworks met voorbeelden voor het coderen en configureren van error handling.
  * [Apache](https://httpd.apache.org/docs/2.4/custom-error.html)
  * [Laravel](https://laravel.com/docs/11.x/errors)
  * [Django](https://docs.djangoproject.com/en/5.0/ref/views/)
  * [Ruby on Rails](https://guides.rubyonrails.org/layouts_and_rendering.html)
  * [Angular](https://dev.to/this-is-angular/angular-error-handling-101-553)
  * [React (react-router-dom)](https://www.geeksforgeeks.org/how-to-setup-404-page-in-react-routing/)
  * [Vue.js](https://vueschool.io/lessons/how-to-create-a-404-not-found-route-and-page-with-vue-router)
  * [Express.js](https://www.geeksforgeeks.org/how-to-add-a-404-error-page-in-the-express/)
  * [Spring MVC](https://www.digitalocean.com/community/tutorials/spring-mvc-exception-handling-controlleradvice-exceptionhandler-handlerexceptionresolver)
